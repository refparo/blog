---
title: ç¬¬ä¸€ç« ï¼šè¿ˆå‡ºç¬¬ä¸€æ­¥
toc: true
---

## ç¯å¢ƒé…ç½®

Idris çš„ç¯å¢ƒé…ç½®ä¸å…¶å®ƒè¯­è¨€ç›¸æ¯”éå¸¸ç®€å•ã€‚ä½ éœ€è¦çš„æœ‰ï¼š

- ä¸€ä¸ª**çº¯**æ–‡æœ¬ç¼–è¾‘å™¨ï¼ˆæœ€å¥½æ˜¯ä»£ç ç¼–è¾‘å™¨ï¼‰ã€‚å¦‚æœä½ ä¸çŸ¥é“é€‰ä»€ä¹ˆçš„è¯ï¼Œåœ¨ Windows ä¸Šå¯ä»¥é€‰ç”¨ [Notepad++](https://notepad-plus-plus.org/) æˆ– [Visual Studio Code](https://code.visualstudio.com/)ã€‚
- Idris ç¼–è¯‘å™¨ã€‚é Windows å¹³å°çš„ç”¨æˆ·å¯ä»¥æŸ¥çœ‹ [è¿™é‡Œ](https://github.com/idris-lang/Idris-dev/wiki/Installation-Instructions) çš„å®‰è£…è¯´æ˜ã€‚å¦‚æœéœ€è¦è‡ªè¡Œç¼–è¯‘çš„è¯ï¼Œä½ éœ€è¦è‡³å°‘åŠ ä¸Š `ffi` ç¼–è¯‘é€‰é¡¹ã€‚Windows ç”¨æˆ·å¯ä»¥ç›´æ¥ä¸‹è½½ [è¿™é‡Œ](https://github.com/idris-lang/Idris-dev/wiki/Windows-Binaries) çš„å®‰è£…åŒ…ï¼Œ**ä½†æ˜¯éœ€è¦æ‰‹åŠ¨è®¾ç½® `PATH` ç¯å¢ƒå˜é‡**ã€‚

æœ¬æ–‡ä¸­æˆ‘ä»¬å°†ä½¿ç”¨ 1.3.1 ç‰ˆæœ¬çš„ Idris ç¼–è¯‘å™¨ï¼Œä»»ä½•é«˜äº 1.3 ä¸”ä½äº 2.0 çš„ç‰ˆæœ¬ç†è®ºä¸Šéƒ½é€‚ç”¨äºæœ¬æ•™ç¨‹ã€‚ä½ åº”è¯¥å°½å¯èƒ½å®‰è£…æœ€æ–°çš„æ­£å¼ç‰ˆã€‚

## REPL

å®‰è£…å¥½ Idrisï¼Œæˆ‘ä»¬çš„ç¬¬ä¸€æ­¥æ˜¯æ‰“å¼€ *REPL*ï¼Œå³ *read-eval-print-loop*ï¼Œ*è¯»å–ï¹£æ±‚å€¼ï¹£è¾“å‡ºå¾ªç¯*ã€‚å¦‚æœä½ ä¹‹å‰å­¦ä¹ è¿‡ Pythonã€Javascriptã€Haskell ç­‰è¯­è¨€ï¼Œä½ åº”è¯¥å·²ç»äº†è§£ REPL äº†ã€‚é¦–å…ˆå¯åŠ¨ä¸€ä¸ª shellï¼ˆä½¿ç”¨ Windows å®‰è£…åŒ…çš„è¯·ç”¨ `Win+R` è¿è¡Œ `cmd` è¿›å…¥å‘½ä»¤æç¤ºç¬¦ï¼‰ï¼Œè¾“å…¥ `idris` æŒ‡ä»¤æ‰“å¼€ REPLã€‚è¿™æ—¶ä½ ä¼šçœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„ä¿¡æ¯ï¼š

```
     ____    __     _                                          
    /  _/___/ /____(_)____                                     
    / // __  / ___/ / ___/     Version 1.X.Y-ZZZZZZ
  _/ // /_/ / /  / (__  )      http://www.idris-lang.org/      
 /___/\__,_/_/  /_/____/       Type :? for help               

Idris is free software with ABSOLUTELY NO WARRANTY.            
For details type :warranty.
Idris>
```

`Idris>` å°±æ˜¯ Idris REPL çš„æç¤ºç¬¦ã€‚é¡¾åæ€ä¹‰ï¼ŒREPL çš„åŠŸèƒ½å°±æ˜¯**è¯»å–**ä½ çš„è¾“å…¥ï¼Œå¯¹å…¶**æ±‚å€¼**ï¼Œç„¶å**è¾“å‡º**ï¼Œä»¥æ­¤**å¾ªç¯**ã€‚å®é™…ä¸Šï¼Œshellã€Linux ä¸Šçš„ `bc` è®¡ç®—å™¨ç­‰ç¨‹åºéƒ½å¯ä»¥çœ‹ä½œ REPLã€‚ä½ å¯ä»¥æŠŠè¿™ä¸ª REPL å½“åšè®¡ç®—å™¨ï¼š

```idris
Idris> 1 + 1
2 : Integer
Idris> 123 + 456
579 : Integer
Idris> 185 * 37
6845 : Integer
```

å½“ç„¶å®ƒä¹Ÿå¯ä»¥è®¡ç®—æ›´å¤æ‚çš„è¡¨è¾¾å¼ï¼š

```idris
Idris> 16 * 79 + 9
1273 : Integer
Idris> 16 * (79 + 9)
1408 : Integer
```

ä¸è¿‡ä½ ä¼šå‘ç°è¿™äº›è¡¨è¾¾å¼æ— æ³•è®¡ç®—ï¼ŒREPL è¾“å‡ºäº†é”™è¯¯ä¿¡æ¯ï¼š

```idris
Idris> 176 - 335
(input):1:5:When checking argument smaller to function Prelude.Nat.-:
        Can't find a value of type 
                LTE 335 176
Idris> 18 / 5
Can't find implementation for Fractional Integer
```

è¿™æ˜¯å› ä¸º Idris æ˜¯ä¸€é—¨*å¼ºç±»å‹è¯­è¨€*ï¼Œä¸å…è®¸è‡ªåŠ¨*ç±»å‹*è½¬æ¢ã€‚ç›®å‰å®ƒçš„*ç±»å‹æ¨å¯¼*å™¨è¿˜ä¸æ˜¯å¾ˆå®Œå–„ï¼Œåœ¨ REPL ä¸­ä¸èƒ½å¾ˆå¥½åœ°æ¨æ–­å‡ºæˆ‘ä»¬éœ€è¦çš„ç±»å‹ã€‚é‚£ä¹ˆï¼Œç±»å‹æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ

## ç±»å‹ä¸è¡¨è¾¾å¼

æˆ‘ä»¬ä¹‹å‰åœ¨ REPL ä¸­è¾“å…¥çš„å†…å®¹éƒ½æ˜¯ *è¡¨è¾¾å¼*ï¼Œè¡¨è¾¾å¼éƒ½å…·æœ‰*å€¼*å’Œç±»å‹ã€‚æŒ‰ä¸‹ `Enter` é”®å REPL æ˜¾ç¤ºçš„å†…å®¹ä¸­ï¼Œå†’å·â€œ`:`â€å‰é¢çš„æ˜¯æˆ‘ä»¬è¾“å…¥çš„è¡¨è¾¾å¼çš„å€¼ï¼Œå†’å·åé¢çš„å°±æ˜¯å®ƒçš„ç±»å‹ã€‚ç»å¤§å¤šæ•°è¯­è¨€éƒ½æœ‰*ç±»å‹ç³»ç»Ÿ*ã€‚ç±»å‹ç³»ç»Ÿæ­£æ˜¯ Idris çš„å¼ºå¤§ä¹‹å¤„ï¼Œä¹Ÿæ˜¯å­¦ä¹  Idris æ—¶æœ€é‡è¦çš„å†…å®¹ã€‚

åœ¨æˆ‘ä»¬ä¹‹å‰çš„æ“ä½œä¸­å‡ºç°çš„æ•´æ•°å±äº `Nat` ç±»å‹æˆ– `Integer` ç±»å‹ï¼ˆå–å†³äºä½ æ‰€è¿›è¡Œçš„è®¡ç®—ï¼‰ã€‚å¦‚æœä½ è¦æ˜ç¡®å£°æ˜ä¸€ä¸ªè¡¨è¾¾å¼ä¸ºæŸç§ç±»å‹ï¼Œå¯ä»¥è¿™æ ·ï¼š

```idris
Idris> the Integer (176 - 335)
-159 : Integer
```

> è¿™é‡Œå‡ºç°çš„ `the` æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬å°†åœ¨åé¢äº†è§£ã€‚

ä¸‹é¢æˆ‘ä»¬å°†äº†è§£ Idris ä¸­çš„ä¸€äº›åŸºæœ¬ç±»å‹ã€‚

### è‡ªç„¶æ•°ï¼š`Nat`

`Nat` ç±»å‹å°±æ˜¯è‡ªç„¶æ•°ï¼Œå®ƒåŒ…å«æ•´ä¸ª $\mathbb N$ é›†åˆã€‚ä½ å¯ä»¥å¯¹å®ƒè¿›è¡ŒåŠ ã€å‡ã€ä¹˜ã€æ•´é™¤æ“ä½œã€‚æˆ‘ä»¬åœ¨å‰é¢å·²ç»å°è¯•è¿‡åŠ ã€å‡ã€ä¹˜æ“ä½œï¼Œè¿™é‡Œè¦æ³¨æ„ `Nat` çš„å‡æ³•è¦æ±‚è¢«å‡æ•°å¤§äºç­‰äºå‡æ•°ï¼Œå¦åˆ™å°±ä¼šå‡ºç°å‰é¢é‚£æ ·çš„é”™è¯¯ï¼š

```idris
Idris> the Nat 176 - 335
(input):1:5:When checking argument smaller to function Prelude.Nat.-:
        Can't find a value of type 
                LTE 335 176
```

Nat è¿˜æ”¯æŒæ•´é™¤æ“ä½œï¼Œå³èˆå»ä½™æ•°çš„é™¤æ³•ã€‚å®ƒçš„è¿ç®—ç¬¦æ˜¯ <code>\`div\`</code>ï¼Œå¦‚ä¸‹ï¼š

```idris
Idris> the Nat 7 `div` 3
2 : Nat
Idris> the Nat 179 `div` 34
5 : Nat
```

> è¿™é‡Œçš„ `+`ã€`-`ã€`*`ã€<code>\`div\`</code> å®é™…ä¸Šéƒ½æ˜¯å‡½æ•°ï¼Œæˆ‘ä»¬å°†åœ¨åé¢è®²åˆ°ã€‚

æˆ‘ä»¬è¿˜å¯ä»¥ç”¨å¦ä¸€ç§æ–¹å¼æ¥è¡¨ç¤º `Nat` ç±»å‹çš„æ•°å€¼ã€‚`Z` è¡¨ç¤º 0ï¼Œ`S n` è¡¨ç¤º n + 1ï¼Œå¦‚ä¸‹ï¼š

```idris
Idris> Z
0 : Nat
Idris> S Z
1 : Nat
Idris> S (S Z)
2 : Nat
```

è¿™ç§è¡¨ç¤ºæ–¹æ³•è™½ç„¶çœ‹ä¼¼æ²¡ä»€ä¹ˆç”¨ï¼Œä½†å®ƒå°†åœ¨åé¢èµ·åˆ°å¾ˆé‡è¦çš„ä½œç”¨ã€‚

### æ•´æ•°ï¼š`Integer`

`Integer` æ˜¯ Idris æä¾›çš„é«˜ç²¾åº¦æ•´æ•°ç±»å‹ã€‚å®ƒåŒ…å«æ•´ä¸ª $\mathbb Z$ é›†åˆã€‚å®ƒä¹Ÿæ”¯æŒåŠ ã€å‡ã€ä¹˜ã€æ•´é™¤æ“ä½œï¼Œå¦‚ä¸‹ï¼š

```idris
Idris> the Integer 2759375936530462549462 + 26493648563659264827465
29253024500189727376927 : Integer
Idris> the Integer 1 - 7293
-7292 : Integer
Idris> the Integer 175639374 * 7294922727
1281275661148652898 : Integer
Idris> the Integer 1756393743620462940472840364 `div` 26492649
66297399841762254143 : Integer
```

Idris ä¹Ÿæä¾›äº†æ™®é€šçš„ã€æ›´å¿«é€Ÿçš„ `Int` ç±»å‹ã€‚å®ƒçš„èŒƒå›´å–å†³äºå¹³å°ç±»å‹ã€‚å¯¹äº 64 ä½å¹³å°ï¼Œ`Int` ç±»å‹åŒ…å«çš„èŒƒå›´æ˜¯ $[-2 ^{63}, 2 ^{63} - 1] \cap \mathbb Z$ã€‚

### åŒç²¾åº¦æµ®ç‚¹æ•°ï¼š`Double`

`Double` æ˜¯æ ‡å‡†çš„ IEEE 754 åŒç²¾åº¦æµ®ç‚¹æ•°ï¼Œæ”¯æŒåŠ ã€å‡ã€ä¹˜ã€é™¤æ“ä½œï¼Œå¦‚ä¸‹ï¼ˆä½ èƒ½å‘ç°æµ®ç‚¹æ•°è®¡ç®—å­˜åœ¨ä¸€å®šè¯¯å·®ï¼‰ï¼š

```idris
Idris> 1.7 + 6.5
8.2 : Double
Idris> 9.3 - 17.2
-7.899999999999999 : Double
Idris> 1.3 * 2.9
3.77 : Double
Idris> 1.9 / 5.3
0.3584905660377358 : Double
```

### å¸ƒå°”ç±»å‹ï¼š`Bool`

`Bool` æ˜¯ Idris ä¸­çš„å¸ƒå°”ç±»å‹ã€‚Idris ä¸­çš„å¸ƒå°”å€¼ç”¨ `True` å’Œ `False` è¡¨ç¤ºã€‚å®ƒæ”¯æŒä¸ï¼ˆ`&&`ï¼‰ã€æˆ–ï¼ˆ`||`ï¼‰ã€éï¼ˆ`not`ï¼‰æ“ä½œï¼Œå¦‚ä¸‹ï¼š

```idris
Idris> True && False
False : Bool
Idris> True || False
True : Bool
Idris> not True
False : Bool
```

è¦æ³¨æ„ä¸åƒå¤§éƒ¨åˆ†å…¶å®ƒè¯­è¨€ï¼ŒIdris æ˜¯ä¸¥æ ¼çš„å¼ºç±»å‹è¯­è¨€ï¼Œå…¶ä»–ç±»å‹çš„å€¼ä¸èƒ½å½“ä½œ `Bool` ç±»å‹ä½¿ç”¨ï¼Œå¦‚ä¸‹ï¼š

```idris
Idris> 1 && 0
When checking an application of function Prelude.Bool.&&:
        Bool is not a numeric type
Idris> 1.0 || 0.0
(input):1:5-6:When checking an application of function Prelude.Bool.||:
        Type mismatch between
                Double (Type of 1.0)
        and
                Bool (Expected type)
Idris> not 0
When checking an application of function Prelude.Bool.not:
        Bool is not a numeric type
```

### å­—ç¬¦ç±»å‹ï¼š`Char`

`Char` æ˜¯ Idris ä¸­çš„å­—ç¬¦ç±»å‹ï¼Œç”¨ `'` åŒ…å›´å­—ç¬¦è¡¨ç¤ºï¼Œç‰¹æ®Šå­—ç¬¦å¯ä»¥ä½¿ç”¨è½¬ä¹‰ç¬¦å·ï¼Œå¦‚ `'\''` è¡¨ç¤º `'` å­—ç¬¦ã€`'\\'` è¡¨ç¤º `\` å­—ç¬¦ã€`'\n'` è¡¨ç¤ºæ¢è¡Œç¬¦ã€‚ä¸å…¶å®ƒæ›´æ¥è¿‘ä¸åº•å±‚çš„è¯­è¨€ç›¸æ¯”ï¼ŒIdris ä¸­çš„å­—ç¬¦ç±»å‹åŒ…å«æ‰€æœ‰ Unicode å­—ç¬¦ï¼Œå¦‚ `'ğŸ˜‚'` è¿™æ ·çš„å­—ç¬¦ã€‚Idris ä¸­çš„å­—ç¬¦ç±»å‹ä¹Ÿä¸èƒ½å½“ä½œæ•°å€¼å‚ä¸è®¡ç®—ï¼Œå¦‚ `'a' + 7` æ˜¯ä¸å…è®¸çš„ã€‚å¦‚æœæƒ³è¿›è¡Œè¿™æ ·çš„è®¡ç®—ï¼Œå°±è¦æ‰‹åŠ¨è½¬æ¢ï¼Œå¦‚ `chr (ord 'a' + 7)` å°±ç­‰äº `'h'`ï¼Œå…¶ä¸­ `chr`ã€`ord` éƒ½æ˜¯æ ‡å‡†åº“ä¸­çš„å‡½æ•°ã€‚

### å­—ç¬¦ä¸²ï¼š`String`

`String` æ˜¯ Idris ä¸­çš„å­—ç¬¦ä¸²ç±»å‹ã€‚ä¸ Haskell ç›¸æ¯”ï¼Œä¸ºäº†æ€§èƒ½ï¼ŒIdris æŠŠå®ƒå®ç°ä¸ºäº†åŸå§‹ç±»å‹ã€‚å­—ç¬¦ä¸²å­—é¢é‡ç”¨ `"` åŒ…å›´å­—ç¬¦ä¸²è¡¨ç¤ºï¼Œå¯¹äºç‰¹æ®Šå­—ç¬¦çš„è½¬ä¹‰ä¸ `Char` ç›¸åŒï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯åœ¨ `String` ä¸­ `"'"` ä¸éœ€è¦è½¬ä¹‰ï¼Œè€Œ `"\""` éœ€è¦è½¬ä¹‰ã€‚

`String` ç±»å‹æ”¯æŒå­—ç¬¦ä¸²è¿æ¥è¿ç®—ï¼ˆ`++`ï¼‰ã€‚æ ‡å‡†åº“è¿˜æä¾›äº†å¾ˆå¤šæ“ä½œ `String` çš„å‡½æ•°ï¼Œå¦‚ä¸‹ï¼š

```idris
Idris> "hello" ++ " world"
"hello world" : String
Idris> strCons 'h' "ello"
"hello" : String
Idris> strHead "hello"
'h' : Char
Idris> strTail "hello"
"ello" : String
```

<!--
### åˆ—è¡¨ï¼š`List`

`List` æ˜¯ Idris ä¸­çš„åˆ—è¡¨ç±»å‹ã€‚-->

å¾…ç»­â€¦â€¦

\[ä¸Šä¸€ç« \] [\[è¿”å›ç›®å½•\]](/posts/a-idris-tutorial-from-zero/) \[ä¸‹ä¸€ç« \]
